<section class="section">
  <div class="container">
    <h1 class="title">Complete your register</h1>
    <img src="{{profile.img}}" alt="{{email}}" width="200" />
    <div class="box">
      <form action="/create-profile" method="POST" enctype="multipart/form-data">
        <label for="profile-picture" class="label">Profile Picture</label>
        <div class="file has-name is-fullwidth">
          <label class="file-label">
            <input class="file-input" type="file" name="photo">
            <span class="file-cta">
              <span class="file-icon">
                <i class="fas fa-upload"></i>
              </span>
              <span class="file-label">
                Choose a file…
              </span>
            </span>
            <span class="file-name">
              ...
            </span>
          </label>
        </div>
        <div class="field">
          <label for="name" class="label">Username</label>
          <p class="control has-icons-left has-icons-right">
            <input class="input" type="text" name="name" placeholder="Enter name">
            <span class="icon is-small is-left">
              <i class="fas fa-user"></i>
            </span>
            <span class="icon is-small is-right">
              <i class="fas fa-check"></i>
            </span>
          </p>
        </div>
        <div id = 'buttons'>
          <a id = "want" class="button is-primary" onclick="displayWant()">Looking for a space</a>
          <a id = "have" class="button is-primary" onclick="displayHave()">I have a space</a>
          <a id = "both" class="button is-primary" onclick="displayBoth()">Both</a>
        </div>
        {{!-- DIVISIÓN --}}
        <section id="Formularies">
        <div id="want-form">
          <h2 class="title">Looking for a space</h2>
          <div class = "field">
            <label class = "label">Plate Number</label>
            <div class = "control"> 
              <input class = "input"type="text" name = "plateNumber" placeholder="Example: 754Y6V">
            </div>
          </div>
            <div class="field">
              <label class="label">Model</label>
              <div class="control">
                <input class="input" type="text" name = "model" placeholder="Example: Nissan Versa">
              </div>
            </div>
              <div class="field">
                <label class="label">Dimensions</label>
                <div class="control">
                  <label class="radio">
                    <input type="radio" value="S" name="dimensionsW"> Small
                  </label>
                  <label class="radio">
                      <input type="radio" value="M" name="dimensionsW"> Medium
                  </label>
                  <label class="radio">
                    <input type="radio" value="L" name="dimensionsW"> Large
                  </label>
                </div>
              </div>
        </div>
        <br>
        <hr>
        <br>
        <div id="have-form">
          <h1 class="title">I have an unused space</h1>
          <div>
            <div id="search">
            </div>
          </div>
          <p>Search your location in the map:</p>
          <div id="map" style="width: 500px; height: 500px"></div>

          <div class="field">
            <label class="label">Adress</label>
            <div class="control">
              <input id="address" class="input" type="text" name="address" placeholder="Example: Tonalá 10, Roma Norte, Ciudad de México">
            </div>
            <label class="label">Lat</label>
            <div class="control">
              <input type="text" name="lat" id="lat">
            </div>
            <label class="label">Lng</label>
            <div class="control">
              <input type="text" name="lng" id="lng">
            </div>
          </div>
          <div class="field">
            <label class="label">Dimensions</label>
            <div class="control">
              <label class="radio">
                <input type="radio" value="S" name="dimensionsH"> Small
              </label>
              <label class="radio">
                <input type="radio" value="M" name="dimensionsH"> Medium
              </label>
              <label class="radio">
                <input type="radio" value="L" name="dimensionsH"> Large
              </label>
            </div>
          </div>
            <div class="field">
              <label class="label">Availability</label>
              <div class="control">
                <label class="radio">
                  <input type="radio" name="hours" onclick="hideHours()"> All day
                </label>
                <label class="radio">
                  <input type="radio" name="hours" onclick="displayHours()"> Specific hours
                </label>
              </div>
              </div>
              </div>
                  <div id='hours'>
                  <div class="control">
                    <div class="select">
                      <select class="is-hovered">
                        <option>Start</option>
                        <option>00:00</option vlaue='0'>
                        <option>01:00</option vlaue='1'>
                        <option>02:00</option vlaue='2'>
                        <option>03:00</option vlaue='3'>
                        <option>04:00</option vlaue='4'>
                        <option>05:00</option vlaue='5'>
                        <option>06:00</option vlaue='6'>
                        <option>07:00</option vlaue='7'>
                        <option>08:00</option vlaue='8'>
                        <option>09:00</option vlaue='9'>
                        <option>10:00</option vlaue='10'>
                        <option>11:00</option vlaue='11'>
                        <option>12:00</option vlaue='12'>
                        <option>13:00</option vlaue='13'>
                        <option>14:00</option vlaue='14'>
                        <option>15:00</option vlaue='15'>
                        <option>16:00</option vlaue='16'>
                        <option>17:00</option vlaue='17'>
                        <option>18:00</option vlaue='18'>
                        <option>19:00</option vlaue='19'>
                        <option>20:00</option vlaue='20'>
                        <option>21:00</option vlaue='21'>
                        <option>22:00</option vlaue='22'>
                        <option>23:00</option vlaue='23'>
                        <option>24:00</option vlaue='24'>
                      </select>
                    </div>
                  </div>
                  <div class="control">
                    <div class="select">
                    <select class="is-hovered">
                      <option>End</option>
                      <option>00:00</option vlaue='0'>
                      <option>01:00</option vlaue='1'>
                      <option>02:00</option vlaue='2'>
                      <option>03:00</option vlaue='3'>
                      <option>04:00</option vlaue='4'>
                      <option>05:00</option vlaue='5'>
                      <option>06:00</option vlaue='6'>
                      <option>07:00</option vlaue='7'>
                      <option>08:00</option vlaue='8'>
                      <option>09:00</option vlaue='9'>
                      <option>10:00</option vlaue='10'>
                      <option>11:00</option vlaue='11'>
                      <option>12:00</option vlaue='12'>
                      <option>13:00</option vlaue='13'>
                      <option>14:00</option vlaue='14'>
                      <option>15:00</option vlaue='15'>
                      <option>16:00</option vlaue='16'>
                      <option>17:00</option vlaue='17'>
                      <option>18:00</option vlaue='18'>
                      <option>19:00</option vlaue='19'>
                      <option>20:00</option vlaue='20'>
                      <option>21:00</option vlaue='21'>
                      <option>22:00</option vlaue='22'>
                      <option>23:00</option vlaue='23'>
                      <option>24:00</option vlaue='24'>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <div class="field">
            <p class="control">
              <button class="button is-primary">
                Create
              </button>
            </p>
          </div>
        </div>
        </section>
      </form>
    </div>
  </div>
</section>
{{!-- SearchBar style in map --}}
{{!-- <style>
#search {
  position: absolute;
  z-index: 1;
}
</style> --}}
{{!-- Map instance --}}
<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoiZXJpdmFzZiIsImEiOiJjazBkeG8ydmowYzRuM2JvYjVwbWc5eHkzIn0.sGUiEoqhR6A8o7tgvi2qMA'
  const map = new mapboxgl.Map({
    container: "map",
    style: "mapbox://styles/mapbox/streets-v10",
  });

  const geocoder = new MapboxGeocoder({ accessToken:mapboxgl.accessToken}, 'top-left')

  document.getElementById("search").appendChild(geocoder.onAdd(map))
  const address = document.getElementById('address')
  const lat = document.getElementById('lat')
  const lng = document.getElementById('lng')

  geocoder.on('result', (e) => {
    address.value = e.result.place_name;
    lat.value = e.result.center[0];
    lng.value = e.result.center[1];
  })

  map.addControl(new mapboxgl.NavigationControl())

  if (navigator.geolocation) {
    // Get current position
    // The permissions dialog will pop up
    navigator.geolocation.getCurrentPosition(function (position) {
      // Create an object to match Mapbox's Lat-Lng array format
      const center = [
        position.coords.longitude,
        position.coords.latitude
      ];

      map.setZoom(12).setCenter(center)

      new mapboxgl.Marker({ color: "red" })
        .setLngLat(center)
        .setPopup(new mapboxgl.Popup().setHTML("<h3>You are here</h3>"))
        .addTo(map);
    })
  }
  // Funcionalidad de los botones
  function displayWant(){
    document.getElementById('want-form').style.display='block'
    document.getElementById('have-form').style.display ='none'
  }
  function displayHave() {
      document.getElementById('have-form').style.display='block'
      document.getElementById('want-form').style.display ='none'
  }
  function displayBoth() {
      document.getElementById('want-form').style.display='block'
      document.getElementById('have-form').style.display='block'
  }
  function displayHours(){
    document.getElementById('hours').style.display='block'
  }
  function hideHours(){
    document.getElementById('hours').style.display='none'
  }

</script>
