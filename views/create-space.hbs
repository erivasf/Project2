<div class="container">
  <div class="columns is-centered">
    <div class="column is-5-tablet is-4-desktop is-8-widescreen">
      <h1 class="title">Register your available space</h1>
      <form action="/create-space" method="POST">
        <div>
          <p>Search your space location:</p>
          <div id="search"></div>
          <small>The location information will autocomplete</small>
        </div>
        {{!-- Map --}}
        <div id="map" style="width: 500px; height: 500px"></div>
        {{!-- Address / Lat / Lng--}}
        <div class="field">
          <label class="label">Adress</label>
          <div class="control">
            <input id="address" class="input" type="text" name="address" placeholder="Example: Tonalá 10, Roma Norte, Ciudad de México" readonly>
          </div>
        </div>
        <div class="field">
          <label class="label">Lat</label>
          <div class="control">
            <input class="input" type="text" name="lat" id="lat" readonly>
          </div>
        </div>
        <div class="field">
          <label class="label">Lng</label>
          <div class="control">
            <input class="input" type="text" name="lng" id="lng" readonly>
          </div>
        </div>
        {{!-- Dimensions --}}
        <div class="field">
          <label class="label">Dimensions</label>
          <div class="control">
            <label class="radio">
              <input type="radio" value="S" name="dimensionsH"> Small
            </label>
            <label class="radio">
              <input type="radio" value="M" name="dimensionsH"> Medium
            </label>
            <label class="radio">
              <input type="radio" value="L" name="dimensionsH"> Large
            </label>
          </div>
        </div>
        {{!-- Availability --}}
        <div class="field">
          <label class="label">Availability</label>
          <div class="control">
            <label class="radio">
              <input type="radio" value="ALL DAY" name="availability" onclick="hideHours()"> All day
            </label>
            <label class="radio">
              <input type="radio" value="SPECIFIC HOURS" name="availability" onclick="displayHours()"> Specific hours
            </label>
          </div>
        </div>
        {{!-- Hours --}}
        <div id='hours'>
          <div class="control is-inline-block">
            <div class="select">
              <select class="is-hovered">
                <option>Start</option>
                <option>00:00</option vlaue='0'>
                <option>01:00</option vlaue='1'>
                <option>02:00</option vlaue='2'>
                <option>03:00</option vlaue='3'>
                <option>04:00</option vlaue='4'>
                <option>05:00</option vlaue='5'>
                <option>06:00</option vlaue='6'>
                <option>07:00</option vlaue='7'>
                <option>08:00</option vlaue='8'>
                <option>09:00</option vlaue='9'>
                <option>10:00</option vlaue='10'>
                <option>11:00</option vlaue='11'>
                <option>12:00</option vlaue='12'>
                <option>13:00</option vlaue='13'>
                <option>14:00</option vlaue='14'>
                <option>15:00</option vlaue='15'>
                <option>16:00</option vlaue='16'>
                <option>17:00</option vlaue='17'>
                <option>18:00</option vlaue='18'>
                <option>19:00</option vlaue='19'>
                <option>20:00</option vlaue='20'>
                <option>21:00</option vlaue='21'>
                <option>22:00</option vlaue='22'>
                <option>23:00</option vlaue='23'>
                <option>24:00</option vlaue='24'>
              </select>
            </div>
          </div>
          <div class="control is-inline-block">
            <div class="select">
            <select class="is-hovered">
              <option>End</option>
              <option>00:00</option vlaue='0'>
              <option>01:00</option vlaue='1'>
              <option>02:00</option vlaue='2'>
              <option>03:00</option vlaue='3'>
              <option>04:00</option vlaue='4'>
              <option>05:00</option vlaue='5'>
              <option>06:00</option vlaue='6'>
              <option>07:00</option vlaue='7'>
              <option>08:00</option vlaue='8'>
              <option>09:00</option vlaue='9'>
              <option>10:00</option vlaue='10'>
              <option>11:00</option vlaue='11'>
              <option>12:00</option vlaue='12'>
              <option>13:00</option vlaue='13'>
              <option>14:00</option vlaue='14'>
              <option>15:00</option vlaue='15'>
              <option>16:00</option vlaue='16'>
              <option>17:00</option vlaue='17'>
              <option>18:00</option vlaue='18'>
              <option>19:00</option vlaue='19'>
              <option>20:00</option vlaue='20'>
              <option>21:00</option vlaue='21'>
              <option>22:00</option vlaue='22'>
              <option>23:00</option vlaue='23'>
              <option>24:00</option vlaue='24'>
              </select>
            </div>
          </div>
        </div>
        {{!-- Button --}}
        <div class="field">
          <p class="control">
            <button class="button is-primary">
              Create Space
            </button>
          </p>
        </div>
      </form>
    </div>
  </div>
</div>

{{!-- Map instance --}}
<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoiZXJpdmFzZiIsImEiOiJjazBkeG8ydmowYzRuM2JvYjVwbWc5eHkzIn0.sGUiEoqhR6A8o7tgvi2qMA'
  const map = new mapboxgl.Map({
    container: "map",
    style: "mapbox://styles/mapbox/streets-v10",
  });

  const geocoder = new MapboxGeocoder({ accessToken:mapboxgl.accessToken}, 'top-left')
 {{!-- map.addControl(new MapboxGeocoder({ accessToken: mapboxgl.accessToken }), 'top-left') --}}

  document.getElementById("search").appendChild(geocoder.onAdd(map))
  const address = document.getElementById('address')
  const lat = document.getElementById('lat')
  const lng = document.getElementById('lng')

  geocoder.on('result', (e) => {
    address.value = e.result.place_name;
    lat.value = e.result.center[0];
    lng.value = e.result.center[1];
  })

  map.addControl(new mapboxgl.NavigationControl())

  if (navigator.geolocation) {
    // Get current position
    // The permissions dialog will pop up
    navigator.geolocation.getCurrentPosition(function (position) {
      // Create an object to match Mapbox's Lat-Lng array format
      const center = [
        position.coords.longitude,
        position.coords.latitude
      ];

      map.setZoom(12).setCenter(center)

      new mapboxgl.Marker({ color: "red" })
        .setLngLat(center)
        .setPopup(new mapboxgl.Popup().setHTML("<h3>You are here</h3>"))
        .addTo(map);
    })
  }


  function displayHours(){
    document.getElementById('hours').style.display='block'
  }
  function hideHours(){
    document.getElementById('hours').style.display='none'
  }
  </script>